<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org" >
<head>
    <meta charset="UTF-8">
    <title>Bài viết mới</title>
</head>
<body>
    <form action="/newpost" method="post" th:object="${post}">
        <div>
            <input type="text" th:field="*{title}" placeholder="Tiêu đề">
        </div>
        <div>
            <textarea th:field="*{description}" placeholder="Mô tả">
            </textarea>
        </div>
        <div id="ItemList">
            <div  th:each="workRow, rowStat : *{itemPostList}">
                <input th:field="*{itemPostList[__${rowStat.index}__].text}" type="text" th:value="*{itemPostList[__${rowStat.index}__].type}">
            </div>

        </div>

        <div>
            <button type="button" onclick="addText()">Add text</button>
            <button type="button" onclick="addImage()">Add img</button>
        </div>

    </form>
</body>
<script th:inline="javascript">
    var index=0;
    function addText() {
        var node=document.createElement("div");
        node.innerHTML=`<textarea name="itemPostList[`+index+`].text"> </textarea>
                        <input name="itemPostList[`+index+`].type" type=hidden value="TEXT">
                        <input name="itemPostList[`+index+`].number" type=hidden value=`+index+`>`;
        document.getElementById("ItemList").appendChild(node);
        index++;
    }
    function addImage() {
        var node=document.createElement("div");
        node.innerHTML=`<input type="file" name="itemPostList[`+index+`].text" accept="image/*">
                        <input name="itemPostList[`+index+`].type" type=hidden value="IMG">
                        <input name="itemPostList[`+index+`].number" type=hidden value=`+index+`>
                        <img id="itemPostList[`+index+`].textimg"`;
        document.getElementById("ItemList").appendChild(node);
        index++;
    }

</script>
</html>
